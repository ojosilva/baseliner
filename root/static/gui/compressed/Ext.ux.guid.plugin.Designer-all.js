if(!Ext.ux.Util){Ext.ux.Util=function(A){Ext.apply(this,A);Ext.ux.Util.superclass.constructor.call(this);this.initialize()};Ext.extend(Ext.ux.Util,Ext.util.Observable,{nocache:false,useHasOwn:({}.hasOwnProperty?true:false),initialize:function(){this.addEvents({error:true});this.on("error",this.onError,this)},onError:function(B,A){return true},dateStr:function(A){A=A||new Date();return(A.getHours()<10?"0":"")+A.getHours()+":"+(A.getMinutes()<10?"0":"")+A.getMinutes()+":"+(A.getSeconds()<10?"0":"")+A.getSeconds()},nocacheUrl:function(A,B){B=B==undefined?this.nocache:B;if(B){A+=(A.indexOf("?")!=-1?"&":"?")+"_dc="+(new Date().getTime())}return A},syncContent:function(A,I,E,D){var B=Ext.lib.Ajax.activeX;var H=(document.location.protocol=="file:");var C;try{if(Ext.isIE7&&H){throw ("IE7forceActiveX")}C=new XMLHttpRequest()}catch(G){for(var F=0;F<B.length;++F){try{C=new ActiveXObject(B[F]);break}catch(G){}}}A=this.nocacheUrl(A,I);if(typeof D=="object"){A+=(A.indexOf("?")!=-1?"&":"?")+Ext.urlEncode(D)}try{C.open("GET",A,false);C.send(null);if((H&&C.responseText.length!=0)||(C.status!==undefined&&C.status>=200&&C.status<300)){return E?C.response:C.responseText}}catch(G){this.fireEvent("error","synchronized",G)}return false},scriptLoader:function(B,D){if(!B){return false}var G=B;if(!document.getElementById(G)){var E=this.syncContent(B,D);if(E===false){return false}var C=document.getElementsByTagName("head")[0];var A=document.createElement("script");try{A.text=E}catch(F){A.appendChild(E)}A.setAttribute("type","text/javascript");A.setAttribute("id",G);C.appendChild(A)}return true},getUrlAction:function(D,A,C){D=D.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var B="[\\?&]"+D+"=([^&#]*)";var F=new RegExp(B);var E=F.exec(C||window.location.href);if(E==null){return isNaN(A)?A:Number(A)}else{return isNaN(E[1])?E[1]:Number(E[1])}},parseUrl:function(F,B){var E=Ext.applyIf(B||{},{strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}}),A=E.parser[E.strictMode?"strict":"loose"].exec(F),D={},C=14;while(C--){D[E.key[C]]=A[C]||""}D[E.q.name]={};D[E.key[12]].replace(E.q.parser,function(H,G,I){if(G){D[E.q.name][G]=I}});if(!D.protocol){D.relative=D.host+D.relative;D.path=D.host+D.path;D.directory=D.host+D.directory;D.host=""}if(!D.file){D.file=D.path;D.path=D.directory=""}D.name="";D.ext="";if(/\.\w+$/.test(D.file)&&D.file.match(/([^\/\\]+)\.(\w+)$/)){D.name=RegExp.$1;D.ext=RegExp.$2}return D},loadUrl:function(C,E,B){B=B||{};if(this._loadCount==undefined){this._loadCount=0;this._loaded=[]}if(this._loaded[C]&&!B.reload){return }var F;var A=this;var D=document.getElementsByTagName("head")[0];if(document.getElementById(C)){D.removeChild(C)}switch(E){case"css":F=document.createElement("link");F.setAttribute("rel","stylesheet");F.setAttribute("type","text/css");F.setAttribute("href",this.nocacheUrl(C,B.nocache));break;default:F=document.createElement("script");F.setAttribute("type","text/javascript");F.setAttribute("src",this.nocacheUrl(C,B.nocache))}F.setAttribute("id",C);F.onload=F.onreadystatechange=function(){if(!A._loaded[C]&&(!F.readyState||[4,"loaded","complete"].indexOf(F.readyState)!=-1)){A._loadCount--;A._loaded[C]=true}};this._loadCount++;this._loaded[C]=false;D.appendChild(F)},merge:function(C,B){if(C instanceof Array&&B instanceof Array){var A=[];for(var D=0;D<C.length;D++){A.push(C[D])}for(var D=0;D<B.length;D++){A.push(B[D])}return A}else{if(typeof (C)==typeof (B)&&typeof (C)=="object"){var E={};for(var D in C){E[D]=this.merge(C[D],B[D])}for(var D in B){if(!E[D]){E[D]=B[D]}}return E}else{if(typeof (C)==typeof (B)){return B}else{if(C==undefined){return B}else{if(B==undefined){return C}else{throw new SyntaxError("Object items cannot be joined because items mismatch")}}}}}},formObject:function(B){if(typeof B=="string"){B=(document.getElementById(B)||document.forms[B])}else{if(B instanceof Ext.form.FormPanel){B=B.getForm().getEl().dom}else{if(B instanceof Ext.form.BasicForm){B=B.getEl().dom}}}var C,A,D,F,H,I=false;var J=function(M,K,L){if(L!=undefined){if(M==undefined){M={}}if(M[K]!=undefined&&M[K] instanceof Array){M[K].push(L)}else{if(M[K]!=undefined){M[K]=new Array(M[K]);M[K].push(L)}else{M[K]=L}}}return M};for(var G=0;B&&G<B.elements.length;G++){C=B.elements[G];F=B.elements[G].disabled;A=B.elements[G].name;D=B.elements[G].value;if(!F&&A){switch(C.type){case"select-one":case"select-multiple":for(var E=0;E<C.options.length;E++){if(C.options[E].selected){H=J(H,A,Ext.isIE?(C.options[E].attributes.value.specified?C.options[E].value:C.options[E].text):(C.options[E].hasAttribute("value")?C.options[E].value:C.options[E].text))}}break;case"radio":case"checkbox":if(C.checked){H=J(H,A,D)}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(I==false){H=J(H,A,D);I=true}break;default:H=J(H,A,D);break}}}return H},require:function(E,C){var A=function(L,I){var H={css:[],js:[]};if(!L){return H}L=(typeof (L)=="string")?L.replace(",",";").split(";"):L||[];I=(typeof (I)=="string")?{basedir:I}:I||{basedir:""};I.cssdir=I.cssdir||I.basedir;I.reload=I.reload==undefined?true:I.reload;I.nocache=I.nocache==undefined?this.nocache:I.nocache;for(var J=0;J<L.length;J++){var G=this.parseUrl(L[J]);if(["js","css"].indexOf(G.ext)==-1){G.file+=".js"}var F=G.ext=="css"?I.cssdir:I.basedir;var K=F+(F.length!=0&&F.charAt(F.length-1)!="/"?"/":"")+G.directory+G.file+(G.query?"?"+G.query:"");if(G.ext=="css"){H.css.push(K);Ext.util.CSS.swapStyleSheet(this.nocacheUrl(K,I.nocache),K)}else{if(I.async){this.loadUrl(K,G.ext,I);H.js.push(K)}else{H.js.push(K);this.scriptLoader(K,I.nocache)}}}return H}.createDelegate(this);if(E instanceof Array&&!C){var B={css:[],js:[]};for(var D=0;D<E.length;D=D+2){B=this.merge(B,A(E[D],E[D+1]))}return B}return A(E,C)}});Ext.ux.UTIL=new Ext.ux.Util();require=Ext.ux.UTIL.require.createDelegate(Ext.ux.UTIL)}Ext.isVersion=function(C,F){if(C instanceof Array){F=formVersion[1];C=formVersion[0]}var A=function(G){var H=G.match(/^(\d)\.\d/);H=H?H[1]:0;var J=G.match(/^\d\.(\d)/);J=J?J[1]:0;var I=G.match(/^\d\.\d\.(\d)/);I=I?I[1]:0;return(H*1)+(J*0.1)+(I*0.001)};var D=A(C||Ext.version);var B=A(F||Ext.version);var E=A(Ext.version);return(E>=D&&E<=B)};Ext.overrideIf=function(A,C,B,D){if(Ext.isVersion(B,D)){return Ext.override(A,C)}return A};Ext.applyVersion=function(B,C,A,D){if(Ext.isVersion(A,D)){return Ext.apply(B,C)}return B};Ext.applyIfVersion=function(B,C,A,D){if(Ext.isVersion(A,D)){return Ext.applyIf(B,C)}return B};Ext.overrideIf(Ext.Panel,{getKeyMap:function(){if(!this.keyMap){if(Ext.isArray(this.keys)){for(var B=0,A=this.keys.length;B<A;B++){this.keys[B].scope=this.keys[B].scope||this}}else{if(this.keys&&!this.keys.scope){this.keys.scope=this}}this.keyMap=new Ext.KeyMap(this.el,this.keys)}return this.keyMap}},"2.0");Ext.overrideIf(Ext.FormPanel,{initFields:function(){this.initItems();var C=this.form;var A=this;var B=function(D){if(D.doLayout&&D!=A){Ext.applyIf(D,{labelAlign:D.ownerCt.labelAlign,labelWidth:D.ownerCt.labelWidth,itemCls:D.ownerCt.itemCls});if(D.items){D.items.each(B)}}else{if(D.isFormField){C.add(D)}}};this.items.each(B)}},"2.0");Ext.overrideIf(Ext.Button,{setTooltip:function(A){var B=this.getEl().child(this.buttonSelector);Ext.QuickTips.register({target:B.id,text:A})}},"2.0");Ext.applyIfVersion(Ext,{isGecko3:!Ext.isSafari&&navigator.userAgent.toLowerCase().indexOf("rv:1.9")>-1},"2.0","2.2");Ext.ComponentMgr=function(A){var C={};function B(G,D){if(!G||!D){return }for(var F=D.split(","),E=0;E<F.length;E++){C[F[E]]=F[E]}}B(Ext.isVersion("2.0"),"box,button,colorpalette,component,container,cycle,dataview,datepicker,editor,editorgrid,grid,paging,panel,progress,propertygrid,splitbutton,tabpanel,treepanel,viewport,window,toolbar,tbbutton,tbfill,tbitem,tbseparator,tbspacer,tbsplit,tbtext,form,checkbox,combo,datefield,field,fieldset,hidden,htmleditor,label,numberfield,radio,textarea,textfield,timefield,trigger");B(Ext.isVersion("2.1"),"slider,statusbar");return Ext.applyIf({registerType:function(E,D){A.registerType(E,D);C[E]=E},isTypeAvailable:function(D){return !!C[D]},allTypes:function(){var D=[];for(var E in C){D.push(E)}return D}},A)}(Ext.ComponentMgr);Ext.reg=Ext.ComponentMgr.registerType;Ext.namespace("Ext.ux.form");Ext.ux.form.SimpleCombo=Ext.extend(Ext.form.ComboBox,{mode:"local",triggerAction:"all",typeAhead:true,valueField:"value",displayField:"name",forceSelection:true,editable:true,minChars:0,customProperties:false,initComponent:function(){Ext.ux.form.SimpleCombo.superclass.initComponent.call(this);if(!this.store&&this.data){this.store=new Ext.data.SimpleStore({fields:["value","name","cls"],data:this.data})}this.tpl='<tpl for="."><div class="x-combo-list-item {cls}">{'+this.displayField+"}</div></tpl>"},setList:function(B){data=[];if(B&&B instanceof Array){for(var A=0;A<B.length;A++){data.push([B[A],B[A],null])}}this.store.loadData(data,false)},getValue:function(){var A=Ext.ux.form.SimpleCombo.superclass.getValue.call(this);if(typeof (A)=="undefined"){A=""}var B=this.getRawValue()||"";if(!this.customProperties||typeof (A)!="string"||(typeof (A)=="string"&&A.toLowerCase().indexOf(B.toLowerCase())==0)){return A}return B}});Ext.reg("simplecombo",Ext.ux.form.SimpleCombo);Ext.ux.IFrameComponent=Ext.extend(Ext.BoxComponent,{url:null,onRender:function(C,A){var B=this.url;B+=(B.indexOf("?")!=-1?"&":"?")+"_dc="+(new Date().getTime());this.el=C.createChild({tag:"iframe",id:"iframe-"+this.id,frameBorder:0,src:B})}});Ext.reg("iframe",Ext.ux.IFrameComponent);Ext.namespace("Ext.ux");Ext.ux.CodePress=Ext.extend(Ext.form.Field,{sourceEl:false,code:false,language:false,url:false,height:false,width:false,autoResize:false,trim:true,autoComplete:true,readOnly:false,lineNumbers:true,initialized:false,path:undefined,initComponent:function(){if(!Ext.ux.CodePress.path){s=document.getElementsByTagName("script");for(var B=0,C=s.length;B<C;B++){var A=s[B].src?s[B].src:s[B].id;if(A.match("Ext.ux.CodePress.js")){Ext.ux.CodePress.path=A.replace("Ext.ux.CodePress.js","");break}}}if(this.path==undefined){this.path=Ext.ux.CodePress.path||""}if(this.path&&this.path.charAt(this.path.length-1)!="/"){this.path+="/"}Ext.ux.CodePress.superclass.initComponent.call(this);if(this.sourceEl){Ext.get(this.sourceEl).hide()}this.addEvents({initialize:true,activate:true})},adjustSize:Ext.BoxComponent.prototype.adjustSize,resize:function(){if(!this.editor){return }var B,A;if(this.autoResize){B=this.ownerCt.body.dom.clientHeight+"px";A=this.ownerCt.body.dom.clientWidth+"px"}else{B=(this.height||this.ownerCt.body.dom.clientHeight)+"px";A=(this.width||this.ownerCt.body.dom.clientWidth)+"px"}this.editor.body.style.width=A;this.iframe.setStyle("height",B);this.iframe.setStyle("width",A)},onRender:function(B,A){Ext.ux.CodePress.superclass.onRender.call(this,B,A);this.el.dom.style.border="0 none";this.el.dom.setAttribute("tabIndex",-1);this.el.addClass("x-hidden");if(Ext.isIE){this.el.applyStyles("margin-top:-1px;margin-bottom:-1px;")}this.wrap=this.el.wrap({});this.iframe=Ext.get(document.createElement("iframe"));this.iframe.src=(Ext.SSL_SECURE_URL||"javascript:false");if(!this.sourceEl){this.textarea=Ext.get(document.createElement("textarea"))}else{this.textarea=Ext.get(this.sourceEl)}this.textarea.dom.disabled=true;this.textarea.dom.style.overflow="hidden";this.textarea.dom.style.overflow="auto";this.iframe.dom.frameBorder=0;this.iframe.setStyle("visibility","hidden");this.iframe.setStyle("position","absolute");this.options=this.textarea.dom.className;this.wrap.dom.appendChild(this.textarea.dom);this.textarea.dom.parentNode.insertBefore(this.iframe.dom,this.textarea.dom);this.edit();this.height=(this.height||this.ownerCt.body.dom.clientHeight);this.width=(this.width||this.ownerCt.body.dom.clientWidth)},focus:function(){},initialize:function(){if(Ext.isIE){this.doc=this.iframe.dom.contentWindow.document;this.win=this.iframe.dom.contentWindow}else{this.doc=this.iframe.dom.contentDocument;this.win=this.iframe.dom.contentWindow}this.editor=this.win.CodePress;this.editor.body=this.doc.getElementsByTagName("body")[0];if(this.url){Ext.Ajax.request({url:this.url,method:"get",success:function(A,B){var C=A.responseText;this.code=C;this.editor.setCode(this.code)}.createDelegate(this)})}else{this.editor.setCode(this.code||this.textarea.dom.value)}this.resize();this.setOptions();this.editor.syntaxHighlight("init");this.textarea.dom.style.display="none";this.iframe.dom.style.position="static";this.iframe.dom.style.visibility="visible";this.iframe.dom.style.display="inline";this.initialized=true;this.fireEvent("initialize",this)},edit:function(A,B){if(A){this.textarea.dom.value=document.getElementById(A)?document.getElementById(A).value:A}if(!this.textarea.dom.disabled){return }this.language=B?B:this.getLanguage();this.iframe.dom.src=this.path+"codepress.html?language="+this.language+"&ts="+(new Date).getTime();this.iframe.removeListener("load",this.initialize);this.iframe.on("load",this.initialize,this)},getLanguage:function(){if(this.language){return this.language}for(language in Ext.ux.CodePress.languages){if(this.options.match("\\b"+language+"\\b")){return Ext.ux.CodePress.languages[language]?language:"generic"}}},setOptions:function(){if(this.autoComplete===false||this.options.match("autocomplete-off")){this.toggleAutoComplete()}if(this.readOnly===true||this.options.match("readonly-on")){this.toggleReadOnly()}if(this.lineNumbers===false||this.options.match("linenumbers-off")){this.toggleLineNumbers()}},getCode:function(){var A;if(this.textarea&&this.editor){A=this.textarea.dom.disabled?this.editor.getCode():this.textarea.dom.value}else{A=this.code||""}A=this.trim?A.replace(/^\s+|(\s+$|\n$|\r$)/g,""):A;return A},setCode:function(A){if(this.textarea&&this.editor){this.textarea.dom.disabled?this.editor.setCode(A):this.textarea.dom.value=A;this.editor.syntaxHighlight("init")}else{this.code=A}},setValue:function(A){this.setCode(A)},getValue:function(){return this.getCode()},toggleAutoComplete:function(){if(this.editor){this.editor.autocomplete=(this.editor.autocomplete)?false:true}},toggleReadOnly:function(){this.textarea.dom.readOnly=(this.textarea.dom.readOnly)?false:true;if(this.iframe.dom.style.display!="none"&&this.editor){this.editor.readOnly(this.textarea.dom.readOnly?true:false)}},toggleLineNumbers:function(){if(!this.editor){return }var A=this.editor.body.className;this.editor.body.className=(A==""||A=="show-line-numbers")?"hide-line-numbers":"show-line-numbers"},toggleEditor:function(){if(this.textarea.dom.disabled){this.textarea.dom.value=this.getCode();this.textarea.dom.disabled=false;this.iframe.dom.style.display="none";this.textarea.dom.style.display="inline"}else{this.textarea.dom.disabled=true;this.setCode(this.textarea.dom.value);if(this.editor){this.editor.syntaxHighlight("init")}this.iframe.domstyle.display="inline";this.textarea.dom.style.display="none"}}});Ext.ux.CodePress.languages={csharp:"C#",css:"CSS",generic:"Generic",html:"HTML",java:"Java",javascript:"JavaScript",perl:"Perl",ruby:"Ruby",php:"PHP",text:"Text",sql:"SQL",vbscript:"VBScript"};Ext.reg("codepress",Ext.ux.CodePress);Ext.ux.Json=Ext.extend(Ext.ux.Util,{indentString:"  ",readable:true,licenseText:null,jsonId:null,scope:{},evalException:true,fullEncode:false,initialize:function(){Ext.ux.Json.superclass.initialize.call(this);this.addEvents({beforeapply:true,afterapply:true})},getScope:function(){return this.scope},isEmpty:function(B){if(B instanceof Array){for(var A=0;A<B.length;A++){if(!this.isEmpty(B[A])){return false}}}else{if(typeof (B)=="object"){for(var A in B){if((!this.useHasOwn||B.hasOwnProperty(A))&&(!this.jsonId||A.indexOf(this.jsonId)!=0)){return false}}}else{if(B!=undefined){return false}}}return true},load:function(A,B){if(B&&B instanceof Ext.Container){return this.load(A,function(C){this.apply(B,C)}.createDelegate(this))}else{if(typeof (B)=="function"){Ext.Ajax.request({url:A,nocache:this.nocache,callback:function(E,G,D){try{if(G){var C=this.decode(D.responseText);if(typeof callback=="function"){callback(C)}}else{throw new Error("Failure during load")}}catch(F){this.fireEvent("error","load",F)}},scope:this});return null}else{return this.decode((typeof (A)=="object")?this.syncContent(A.url,A.nocache==undefined?this.nocache:A.nocache):this.syncContent(A.url,this.nocache))}}},set:function(G,K,L){var B=true,C=G||this;L=L||{};if(L.nocache==undefined){L.nocache=this.nocache}if(K){if(L.scopeOnly){L=Ext.apply({evalException:false},L)}if(typeof (K)=="string"){K=this.decode(K,L)}for(var H in K){var F=H;if(H=="required_js"){if(K[H]){var A=K[H].replace(",",";").split(";");for(var I=0;I<A.length;I++){if(document.getElementById(A[I])){continue}if(!this.scriptLoader(A[I],L.nocache)){var J=new Error("Failed to load javascript "+A[I]);if(this.fireEvent("error","set",J)){throw J}}}}}else{if(H=="required_css"){if(K[H]){var A=K[H].replace(",",";").split(";");for(var I=0;I<A.length;I++){if(document.getElementById(A[I])){continue}Ext.util.CSS.swapStyleSheet(A[I],A[I])}}}else{var D=C;if(H.indexOf("scope.")==0){D=L.scope?L.scope:this.getScope();F=H.substring(6);if(F.charAt(0)=="!"){F=F.substring(1);if(D[F]){continue}}}else{if(L.scopeOnly){continue}}var E="set"+F.substring(0,1).toUpperCase()+F.substring(1);try{if(D[E]&&typeof D[E]=="function"){D[E].call(C,K[H])}else{if(D[F]&&typeof D[F]=="function"){D[F].call(C,K[H])}else{D[F]=K[H]}}}catch(J){if(L.ignoreError){B=false}else{B|=(this.fireEvent("error","set("+E+")",J)===false)}}}}}}return B},clean:function(C){var G=0;for(var B in C){if(!this.useHasOwn||C.hasOwnProperty(B)){if(B=="items"){if(C[B] instanceof Array){var F=[];for(var D=0,A=C[B];D<A.length;D++){var E=this.clean(A[D]);if(E!=null){F.push(E)}}C[B]=(F.length>0)?F:null}else{C[B]=this.clean(C[B])}}if(C[B]===undefined||C[B]===null||(typeof C[B]=="string"&&C[B]=="")){delete C[B]}else{G++}}}return G?C:null},editable:function(C){var A=C||{};if(typeof (A)!=="object"){A=this.decode(C)}if(!this.jsonId){return A}if(A instanceof Array){for(var B=0;B<A.length;B++){A[B]=this.editable(A[B])}return A}if(!A[this.jsonId]){A[this.jsonId]=Ext.id();if(A.items){A.items=this.editable(A.items)}}return A},apply:function(D,C,B){var A;try{A=this.jsonId?this.editable(C):C||{};if(typeof (A)!=="object"){A=this.decode(C)}if(A&&(A instanceof Array||typeof (A)=="object")){if(B!==false){A=this.clean(A)}this.fireEvent("beforeapply",D,A);if(D instanceof Ext.Container){while(D.items&&D.items.first()){D.remove(D.items.first(),true)}if(!this.isEmpty(A)){if(A instanceof Array){D.add.apply(D,A)}else{D.add(A)}this.set(D,A.json)}}else{this.set(D,A)}if(D.rendered&&D.layout&&D.layout.layout){D.doLayout()}}}catch(E){if(this.fireEvent("error","apply",E)){throw E}}finally{this.fireEvent("afterapply",D,A)}return A},encodeString:function(B){var A={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};if(/["\\\x00-\x1f]/.test(B)){return'"'+B.replace(/([\x00-\x1f\\"])/g,function(D,C){var E=A[C];if(E){return E}E=C.charCodeAt();return"\\u00"+Math.floor(E/16).toString(16)+(E%16).toString(16)})+'"'}return'"'+B+'"'},indentStr:function(C){var B="",A=0;while(this.readable&&A<C){B+=this.indentString;A++}return B},encodeArray:function(G,B,H){B=B||0;var D=["["],A,F,C=G.length,E;for(var F=0;F<C;F+=1){E=G[F];switch(typeof E){case"undefined":case"unknown":break;default:if(A){D.push(",")}D.push(E===null?"null":this.encode(E,B+1,H));A=true}}D.push("]");return D.join("")},encodeDate:function(B){var A=function(C){return C<10?"0"+C:C};return'"'+B.getFullYear()+"-"+A(B.getMonth()+1)+"-"+A(B.getDate())+"T"+A(B.getHours())+":"+A(B.getMinutes())+":"+A(B.getSeconds())+'"'},encode:function(D,E,C,I){var A=this.readable?"\n":"";var G=this.readable?" : ":"";E=E||0;if(E==0){var K=[],H=(!I&&this.licenseText)?this.licenseText+"\n":"";K.push(H,this.encode(D,1,C));return K.join("")}if(D==undefined||D===null){return"null"}else{if(D instanceof Array){return this.encodeArray(D,E,C)}else{if(D instanceof Date){return this.encodeDate(D)}else{if(typeof D=="number"){return isFinite(D)?String(D):"null"}else{if(typeof D=="string"&&!isNaN(D)&&D!=""){return D}else{if(typeof D=="string"&&["true","false"].indexOf(D)!=-1){return D}else{if(typeof D=="boolean"){return String(D)}else{if(typeof D=="string"){return this.encodeString(D)}else{var K=[],J,F,L;K.push(this.indentStr(E-1),"{"+A);for(var F in D){L=D[F];var B=(F.indexOf(this.jsonId)==0&&F!=this.jsonId)?F.substring(this.jsonId.length):null;if((!B&&this.jsonId&&D[this.jsonId+F])||(!C&&F==this.jsonId)){continue}if(B){if(typeof (L)=="object"&&(typeof (L.value)!="string"||String(L.value).replace(/\s+$/,""))){if(J){K.push(","+A)}if(L.encode===false){K.push(this.indentStr(E),B,G,L.value)}else{K.push(this.indentStr(E),B,G,this.encode(L.value,E+1,C))}}else{if(typeof (L)!="object"&&String(L).replace(/\s+$/,"")){if(J){K.push(","+A)}K.push(this.indentStr(E),B,G,L)}else{continue}}J=true}else{if(!this.useHasOwn||D.hasOwnProperty(F)){switch(typeof L){case"undefined":case"unknown":break;case"function":if(J){K.push(","+A)}K.push(this.indentStr(E),F,G,""+L);J=true;break;case"object":case"string":if(!L){break}default:if(J){K.push(","+A)}K.push(this.indentStr(E),F,G,L===null?"null":this.encode(L,E+1,C));J=true}}}}K.push(A+this.indentStr(E-2)+"}");return K.join("")}}}}}}}}},getObjectRawValue:function(B,C){if(this.jsonId&&B[this.jsonId+C]){var A=B[this.jsonId+C];return typeof (A)=="object"?A.value:A}return B[C]},setJsonValue:function(A,C,D){A=A||{};if(!A.json){A.json={}}var B=new Ext.ux.Json({jsonId:this.jsonId,nocache:nocache,evalException:false});var E=B.decode(A[this.jsonId+"json"])||{};E[C]=D;A.json[C]=D;A[this.jsonId+"json"]=B.encode(E);return A},setObjectValue:function(A,B,E,D,C){C=C||this.getScope();if(B=="json"){this.set(C,E,{scopeOnly:true,scope:C,nocache:this.nocache})}if(typeof (E)=="string"){E=E.replace(/\s+$/,"")}if(E===null||E===""){delete A[B];if(this.jsonId){delete A[this.jsonId+B]}return E}A[B]=E;if(this.jsonId){if(D&&typeof (D)=="object"){A[this.jsonId+B]=D}else{if(D){try{if(typeof (D)=="string"){D=D.replace(/\s+$/,"")}A[B]=this.decode(D,{exceptionOnly:true,scope:C});if(typeof (A[B])=="string"&&([E,"'"+E+"'",this.encodeString(E)].indexOf(D)!=-1)){delete A[this.jsonId+B]}else{A[this.jsonId+B]=D}}catch(F){A[this.jsonId+B]={value:D,encode:true}}}else{delete A[this.jsonId+B]}}}return E},codeEval:function(code,options){options=options||{};var self=this;var scope=options.scope||this.getScope();var evalException=options.evalException==undefined?this.evalException:options.evalException;if(!code||!String(code).replace(/\s+$/,"")){return null}var myEval=function(code){try{return eval("({fix:"+code+"})").fix}catch(e){e=new SyntaxError("Invalid code: "+code+" ("+e.message+")");if(options.exceptionOnly){throw e}if(evalException&&self.fireEvent("error","codeEval",e)){throw e}return code}}.createDelegate(scope);return myEval(code)},decode:function(T,E){E=E||{};var K=0,J=" ",M=this;var C=E.scope||this.getScope();var U=E.fullDecode==undefined?this.fullDecode:E.fullDecode;function R(W){var X=new SyntaxError(W);X.at=K-1;X.json=T;throw X}function O(){J=T.charAt(K);K+=1;return J}function N(W){K-=W?W:1;J=T.charAt(K);K+=1;return J}function P(X,Y){if(Y==undefined){Y=-1}var W=0;for(;W<X.length&&T.charAt(K+W+Y)==X.charAt(W);W++){}if(W>=X.length){K+=Y+W;O();return true}return false}function F(){while(J){if(J<=" "){O()}else{if(J=="/"){switch(O()){case"/":while(O()&&J!="\n"&&J!="\r"){}break;case"*":O();for(;;){if(J){if(J=="*"){if(O()=="/"){O();break}}else{O()}}else{R("Unterminated comment")}}break;default:N(2);return }}else{break}}}}function H(){var W=J;while(O()&&": \t\n\r-+={(}[])'\"".indexOf(J)==-1){W+=J}return W}function A(a){a=a||J;var b=K-1,Y,Z="",X,W;if(J==a){outer:while(O()){if(J==a){O();return Z}else{if(J=="\\"){switch(O()){case"b":Z+="\b";break;case"f":Z+="\f";break;case"n":Z+="\n";break;case"r":Z+="\r";break;case"t":Z+="\t";break;case"u":W=0;for(Y=0;Y<4;Y+=1){X=parseInt(O(),16);if(!isFinite(X)){break outer}W=W*16+X}Z+=String.fromCharCode(W);break;default:Z+=J}}else{Z+=J}}}}R("Bad string "+T.substring(b,K-1))}function G(X){var Y=K-1,W=[];if(J=="["){O();F();if(J=="]"){O();return W}while(J){W.push(Q(X)[0]);F();if(J=="]"){O();return W}else{if(J!=","){break}}O();F()}}R("Bad array "+T.substring(Y,K-1))}function V(Y){var a=K-1,X,Z={},W;if(J=="{"){O();F();if(J=="}"){O();return Z}while(J){X=J=='"'||J=="'"?A():H();F();if(J!=":"){R("Bad key("+J+") seprator for object "+T)}O();F();W=Q(X!="items");M.setObjectValue(Z,X,W[0],W[1],C);F();if(J=="}"){O();return Z}else{if(J!=","){break}}O();F()}}R("Bad object ["+X+"]"+T.substring(a,K-1))}function D(){var X="",W;if(J=="-"){X="-";O()}while(J>="0"&&J<="9"){X+=J;O()}if(J=="."){X+=".";while(O()&&J>="0"&&J<="9"){X+=J}}if(J=="e"||J=="E"){X+="e";O();if(J=="-"||J=="+"){X+=J;O()}while(J>="0"&&J<="9"){X+=J;O()}}W=+X;if(!isFinite(W)){R("Bad number "+W)}else{return W}}function L(W){while(O()){F();switch(J){case W:return ;case"(":L(")");break;case"[":L("]");break;case"{":L("}");break;case'"':case"'":A(J);K--}}R("Unexpected end of code")}function B(Y){K--;var Z=K-(Y?8:0);var W;while(O()){F();switch(J){case"(":L(")");break;case"[":L("]");break;case'"':case"'":A(J);N(2);break;case"{":L("}");if(!Y){break}O();case",":case"]":case"}":var X=T.substring(Z,K-1);return[M.codeEval(X,E),X]}}var X=T.substring(Z,K-1);return[M.codeEval(X,E),X]}function Q(W){lastCode=null;F();switch(J){case"{":return W&&!U?B():[V(false)];case"[":return W&&!U?B():[G(false)];default:if(P("true")){return[true]}else{if(P("false")){return[false]}else{if(P("null")){return[null]}else{if("-.0123456789".indexOf(J)>=0){return[D()]}else{if(P("function")){return B(true)}}}}}return B()}}try{if(!T){return null}var I=Q(false)[0];F();if(J){R("Invalid Json")}if(this.jsonId&&typeof (I)=="object"){I=this.editable(I)}return I}catch(S){if(E.exceptionOnly){throw S}if(this.fireEvent("error","decode",S)){throw S}}},clone:function(A){return this.decode(this.encode(A))}});Ext.ux.JSON=new Ext.ux.Json({jsonId:"__JSON__",licenseText:"/* This file is created or modified by Ext.ux.Json */"});Ext.ux.JsonPanel=Ext.extend(Ext.Panel,{layout:"fit",border:false,bodyBorder:false,single:true,json:null,nocache:false,initComponent:function(){if(this.autoLoad){if(typeof this.autoLoad!=="object"){this.autoLoad={url:this.autoLoad}}if(typeof this.autoLoad.nocache=="undefined"){this.autoLoad.nocache=this.nocache}}Ext.ux.JsonPanel.superclass.initComponent.call(this);this.json=new Ext.ux.Json({scope:this.scope||this,nocache:this.nocache});this.addEvents({beforejsonload:true,afterjsonload:true,failedjsonload:false})},setListeners:function(A){this.on(A)},onRender:function(C,A){Ext.ux.JsonPanel.superclass.onRender.call(this,C,A);var B=this.getUpdater();B.showLoadIndicator=false;B.on("failure",function(E,D){if(this.ownerCt){this.ownerCt.el.unmask()}if(this.json.fireEvent("error","failedjsonload","url in autoLoad not valid")){this.fireEvent("failedjsonload",D)}}.createDelegate(this));B.on("beforeupdate",function(E,D,F){if(this.loadMask&&this.ownerCt){this.ownerCt.el.mask(this.loadMsg,this.msgCls)}}.createDelegate(this));B.setRenderer({render:function(E,D,F,G){this.apply(D.responseText,G)}.createDelegate(this)})},apply:function(A,C){this.fireEvent("beforejsonload",A);try{this.json.apply(this,A);this.fireEvent("afterjsonload");if(C){C()}return true}catch(B){if(this.json.fireEvent("error","failedjsonload",B)&&this.fireEvent("failedjsonload",A,B)){Ext.Msg.alert("Failure","Failed to decode load Json:"+B.message)}return false}}});Ext.reg("jsonpanel",Ext.ux.JsonPanel);Ext.ux.JsonWindow=Ext.extend(Ext.Window,{layout:"fit",border:false,single:true,json:null,nocache:false,initComponent:function(){if(this.autoLoad){if(typeof this.autoLoad!=="object"){this.autoLoad={url:this.autoLoad}}if(typeof this.autoLoad.nocache=="undefined"){this.autoLoad.nocache=this.nocache}}this.json=new Ext.ux.Json({scope:this.scope||this,nocache:this.nocache});this.addEvents({beforejsonload:true,afterjsonload:true,failedjsonload:false});Ext.ux.JsonWindow.superclass.initComponent.call(this)},setX:function(A){this.setPosition(A,this.y)},setY:function(A){this.setPosition(this.x,A)},setAlignTo:function(A){if(this.rendered){this.alignTo(A[0],A[1],A[2])}},setAnchorTo:function(A){this.anchorTo(A[0],A[1],A[2],A[3])},setListeners:function(A){this.on(A)},onRender:function(C,A){Ext.ux.JsonWindow.superclass.onRender.call(this,C,A);var B=this.getUpdater();B.showLoadIndicator=false;B.on("failure",function(E,D){if(this.ownerCt){this.ownerCt.el.unmask()}if(this.json.fireEvent("error","failedjsonload","url in autoLoad not valid")){this.fireEvent("failedjsonload",D)}}.createDelegate(this));B.on("beforeupdate",function(E,D,F){if(this.loadMask&&this.ownerCt){this.ownerCt.el.mask(this.loadMsg,this.msgCls)}}.createDelegate(this));B.setRenderer({render:function(E,D,F,G){this.apply(D.responseText,G)}.createDelegate(this)})},apply:function(A,C){this.fireEvent("beforejsonload",A);try{this.json.apply(this,A);this.fireEvent("afterjsonload");if(C){C()}return true}catch(B){if(this.json.fireEvent("error","failedjsonload",B)&&this.fireEvent("failedjsonload",A,B)){Ext.Msg.alert("Failure","Failed to decode load Json:"+B.message)}return false}}});Ext.reg("jsonwindow",Ext.ux.JsonWindow);Ext.namespace("Ext.ux.form");Ext.ux.form.CodeField=Ext.extend(Ext.form.TriggerField,{invalidText:"'{0}' is not a valid code",triggerClass:"x-form-codefield-trigger",language:"javascript",codePress:true,codePressPath:undefined,initComponent:function(){this.defaultAutoCreate={tag:"textarea",rows:1,style:"width:100px;height:1.8em;overflow:hidden;",autocomplete:"off",wrap:"off"};Ext.ux.form.CodeField.superclass.initComponent.call(this)},initEvents:function(){Ext.ux.form.CodeField.superclass.initEvents.call(this);this.el.on("dblclick",this.onTriggerClick,this)},getValue:function(){return Ext.ux.form.CodeField.superclass.getValue.call(this)||this.defaultValue||" "},setValue:function(A){Ext.ux.form.CodeField.superclass.setValue.call(this,this.formatCode(A));this.setCode(A)},setCode:function(A){},formatCode:function(A){return String(A).replace(/\s+$/,"")},parseCode:function(A){return true},initValue:function(){Ext.ux.form.CodeField.superclass.initValue.call(this);this.on("focus",function(){this.setValue(this.getValue())},this)},validateValue:function(B){if(!Ext.ux.form.CodeField.superclass.validateValue.call(this,B)){return false}if(B.length<1){this.setCode("");return true}var A=this.parseCode(B);if(!B||(A==false)){this.markInvalid(String.format(this.invalidText,B));return false}this.setCode(B);return true},validateBlur:function(){return !this.editorWin||!this.editorWin.isVisible()},onTriggerClick:function(){if(this.disabled){return }if(!this.editorWin){var A=(this.codePress&&Ext.ux.CodePress)?new Ext.ux.CodePress({path:this.codePressPath,language:this.language,autoResize:true,trim:true}):new Ext.form.TextArea({autoCreate:{tag:"textarea",style:"width:160px;height:80px;",autocomplete:"off",wrap:"off"},resize:Ext.emptyFn});this.editorWin=new Ext.Window({title:"CodeField Editor",iconCls:"icon-editEl",closable:true,width:600,height:450,plain:true,modal:true,maximizable:true,layout:"fit",items:A,closeAction:"hide",keys:[{key:27,scope:this,fn:function(){this.editorWin.hide();if(this.editor.cancelEdit){this.editor.cancelEdit()}}}],buttons:[{text:"Close",scope:this,handler:function(){this.editorWin.hide();if(this.editor.cancelEdit){this.editor.cancelEdit()}}},{text:"Apply",scope:this,handler:function(){this.setValue(A.getValue());this.editorWin.hide();this.editorWin.el.unmask();if(this.editor.completeEdit){this.editor.completeEdit()}}}]});this.editorWin.tf=A;this.editorWin.doLayout();this.editorWin.on("resize",function(){A.resize()})}this.editorWin.show();this.editorWin.tf.setValue(this.getValue())},onRender:function(B,A){this.editor=Ext.getCmp(B.id)||{};Ext.ux.form.CodeField.superclass.onRender.call(this,B,A)}});Ext.reg("codefield",Ext.ux.form.CodeField);Ext.namespace("Ext.ux.data");Ext.ux.data.HttpMergeProxy=function(A){Ext.ux.data.HttpMergeProxy.superclass.constructor.call(this);this.urlArray=A||[];this.urlData=[]};Ext.extend(Ext.ux.data.HttpMergeProxy,Ext.data.DataProxy,{merge:function(C,B){if(C instanceof Array&&B instanceof Array){var A=[];for(var D=0;D<C.length;D++){A.push(C[D])}for(var D=0;D<B.length;D++){A.push(B[D])}return A}else{if(typeof (C)==typeof (B)&&typeof (C)=="object"){var E={};for(var D in C){E[D]=this.merge(C[D],B[D])}for(var D in B){if(!E[D]){E[D]=B[D]}}return E}else{if(typeof (C)==typeof (B)&&typeof (C)=="string"){return C+B}else{if(typeof (C)==typeof (B)){return B}else{if(C==undefined){return B}else{if(B==undefined){return C}else{throw new SyntaxError("Object items cannot be joined because items mismatch")}}}}}}},load:function(F,B,G,D,A){if(this.fireEvent("beforeload",this,F)!==false){this.count=this.urlArray.length;this.urlData=[];for(var C=0;C<this.urlArray.length;C++){var E={params:F||{},request:{callback:G,scope:D,arg:A},reader:B,callback:this.loadResponse,scope:this};E=Ext.apply(E,typeof (this.urlArray[C])=="object"?this.urlArray[C]:{url:this.urlArray[C]});E.urlArrayId=C;Ext.Ajax.request(E)}}else{G.call(D||this,null,A,false)}},loadResponse:function(F,E,B){if(this.count<=0){return }if(!E){this.count=0;this.fireEvent("loadexception",this,F,B);F.request.callback.call(F.request.scope,null,F.request.arg,false);return }try{this.urlData[F.urlArrayId]=F.reader.read(B)}catch(D){this.count=0;this.fireEvent("loadexception",this,F,B,D);F.request.callback.call(F.request.scope,null,F.request.arg,false);return }this.count--;if((this.count)==0){var A;try{for(var C=0;C<this.urlArray.length;C++){A=this.merge(A,this.urlData[C])}this.fireEvent("load",this,F,F.request.arg);F.request.callback.call(F.request.scope,A,F.request.arg,true)}catch(D){this.count=0;this.fireEvent("loadexception",this,F,B,D);F.request.callback.call(F.request.scope,null,F.request.arg,false);return }}},update:function(A){},updateResponse:function(A){}});Ext.namespace("Ext.ux.guid.tree");Ext.ux.guid.tree.CodeLoader=function(B,A){Ext.apply(this,A);this.designer=B;Ext.tree.TreeLoader.superclass.constructor.call(this)};Ext.extend(Ext.ux.guid.tree.CodeLoader,Ext.tree.TreeLoader,{jsonId:"__JSON__",elementToText:function(C){var A=[];C=C||{};if(C[this.jsonId+"xtype"]){var B=C[this.jsonId+"xtype"];A.push(typeof (B)=="object"?B.display||B.value:B)}else{if(C.xtype){A.push(C.xtype)}}if(C.fieldLabel){A.push("["+C.fieldLabel+"]")}if(C.boxLabel){A.push("["+C.boxLabel+"]")}if(C.layout){A.push("<i>"+C.layout+"</i>")}if(C.title){A.push("<b>"+C.title+"</b>")}if(C.text){A.push("<b>"+C.text+"</b>")}if(C.region){A.push("<i>("+C.region+")</i>")}return(A.length==0?"Element":A.join(" "))},load:function(A,B){A.beginUpdate();while(A.firstChild){A.removeChild(A.firstChild)}if(this.doLoad(A,this.designer.getConfig())){if(typeof B=="function"){B()}}A.endUpdate()},doLoad:function(E,F){if(F){if(F instanceof Array){for(var B=0;B<F.length;B++){this.doLoad(E,F[B])}}else{if(!this.designer.isEmpty(F)){var D=this.designer.isContainer(this.designer.findByJsonId(F[this.jsonId]));var C={text:this.elementToText(F),cls:D?"folder":"file",leaf:D?false:true,jsonId:F[this.jsonId]};var G=E.appendChild(new Ext.tree.TreeNode(C));if(F.items){for(var B=0,A=F.items.length;B<A;B++){this.doLoad(G,F.items[B])}}}}}return !!F}});Ext.namespace("Ext.ux.guid.tree");Ext.ux.guid.tree.JsonTreeLoader=Ext.extend(Ext.tree.TreeLoader,{nocache:false,createNode:function(attr){var childeren=attr.childeren;delete attr.childeren;if(this.baseAttrs){Ext.applyIf(attr,this.baseAttrs)}if(this.applyLoader!==false){attr.loader=this}if(typeof attr.uiProvider=="string"){attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)}if(!childeren){return(attr.leaf===false?new Ext.tree.AsyncTreeNode(attr):new Ext.tree.TreeNode(attr))}else{var node=new Ext.tree.TreeNode(Ext.applyIf(attr,{draggable:false}));var self=this;for(var i=0,len=childeren.length;i<len;i++){if(Ext.isVersion(childeren[i].isVersion)){if(childeren[i].wizard){childeren[i]["config"]=function(callback){var w=new Ext.ux.JsonWindow({x:-1000,y:-1000,autoLoad:this.wizard,callback:callback,modal:true,nocache:self.nocache});w.json.on("error",function(type,exception){Ext.Msg.alert("Wizard Load Error",type+" "+(typeof (exception)=="object"?exception.message||exception:exception));this.close();return false},w);w.show()}.createDelegate(childeren[i])}var n=this.createNode(childeren[i]);if(n){node.appendChild(n)}}}return node}},requestData:function(B,D){if(this.dataUrl instanceof Array){var C=this.dataUrl;for(var A=0;A<C.length;A++){this.dataUrl=C[A];Ext.ux.guid.tree.JsonTreeLoader.superclass.requestData.call(this,B,D)}this.dataUrl=C}else{Ext.ux.guid.tree.JsonTreeLoader.superclass.requestData.call(this,B,D)}}});Ext.namespace("Ext.ux.guid.grid");Ext.ux.guid.grid.PropertyRecord=Ext.data.Record.create([{name:"name",type:"string"},"value","type"]);Ext.ux.guid.grid.PropertyStore=function(A,B){Ext.ux.guid.grid.PropertyStore.superclass.constructor.call(this,A,B);this.store=new Ext.data.Store({recordType:Ext.ux.guid.grid.PropertyRecord});this.store.on("update",this.onUpdate,this)};Ext.extend(Ext.ux.guid.grid.PropertyStore,Ext.grid.PropertyStore,{jsonId:"__JSON__",getPropertyType:function(A){if(this.grid&&this.grid.getPropertyType){return this.grid.getPropertyType(A)}return null},setSource:function(F){this.source=F;this.store.removeAll();var E=[];for(var C in F){var B=(C.indexOf(this.jsonId)==0&&C!=this.jsonId)?C.substring(this.jsonId.length):null;if(B&&F[B]==undefined){C=B}if(C.indexOf(this.jsonId)!=0&&["items"].indexOf(C)==-1){var A=F[this.jsonId+C];var D=null;if(typeof (A)=="object"){D=A.type||D;A=A.display||A.value}if(typeof (F[C])=="function"){E.push(new Ext.grid.PropertyRecord({name:C,value:A||String(F[C]),type:"function"},C))}else{if(typeof (F[C])=="object"){E.push(new Ext.grid.PropertyRecord({name:C,value:A||String(Ext.ux.JSON.encode(F[C])),type:"object"},C))}else{E.push(new Ext.grid.PropertyRecord({name:C,value:A||F[C],type:D},C))}}}}this.store.loadRecords({records:E},{},true)},onUpdate:function(E,A,D){if(D==Ext.data.Record.EDIT){var B=A.data.value;var C=A.modified.value;if(this.grid.fireEvent("beforepropertychange",this.source,A.id,B,C)!==false){A.data.changeValue=this.updateSource(A.id,B,A.data.type);A.commit();this.grid.fireEvent("propertychange",this.source,A.id,B,C)}else{A.reject()}}},updateSource:function(A,C,B){var D=this.getPropertyType(A);if(!B&&D){B=D.type}if(this.grid.fireEvent("propertyvalue",this.source,A,C,B,D)){this.source[A]=C}return this.source[A]},setValue:function(B,A){this.store.getById(B).set("value",A);this.updateSource(B,A)}});Ext.ux.guid.grid.PropertyColumnModel=function(B,A){Ext.ux.guid.grid.PropertyColumnModel.superclass.constructor.call(this,B,A);this.setConfig([{header:this.nameText,width:40,resizable:true,sortable:true,dataIndex:"name",id:"name",menuDisabled:true},{header:this.valueText,width:60,resizable:false,dataIndex:"value",id:"value",menuDisabled:true}]);this.jsonId=B.jsonId;Ext.apply(this.editors,{regexp:new Ext.grid.GridEditor(new Ext.ux.form.CodeField({defaultValue:"new RegExp()",codePress:B.codePress,codePressPath:B.codePressPath})),"function":new Ext.grid.GridEditor(new Ext.ux.form.CodeField({defaultValue:"function(){}",codePress:B.codePress,codePressPath:B.codePressPath})),object:new Ext.grid.GridEditor(new Ext.ux.form.CodeField({defaultValue:"{}",codePress:B.codePress,codePressPath:B.codePressPath})),"object/array":new Ext.grid.GridEditor(new Ext.ux.form.CodeField({defaultValue:"[{}]",codePress:B.codePress,codePressPath:B.codePressPath})),array:new Ext.grid.GridEditor(new Ext.ux.form.CodeField({defaultValue:"[]",codePress:B.codePress,codePressPath:B.codePressPath})),template:new Ext.grid.GridEditor(new Ext.ux.form.CodeField({defaultValue:"",codePress:B.codePress,codePressPath:B.codePressPath})),mixed:new Ext.grid.GridEditor(new Ext.ux.form.CodeField({defaultValue:"",codePress:B.codePress,codePressPath:B.codePressPath})),html:new Ext.grid.GridEditor(new Ext.ux.form.CodeField({defaultValue:"",language:"html",codePress:B.codePress,codePressPath:B.codePressPath})),css:new Ext.grid.GridEditor(new Ext.ux.form.CodeField({defaultValue:"",language:"css",codePress:B.codePress,codePressPath:B.codePressPath})),editlist:new Ext.grid.GridEditor(new Ext.ux.form.SimpleCombo({forceSelection:false,data:[],editable:true,customProperties:true})),list:new Ext.grid.GridEditor(new Ext.ux.form.SimpleCombo({forceSelection:false,data:[],editable:true,customProperties:false})),"boolean":new Ext.grid.GridEditor(new Ext.ux.form.SimpleCombo({forceSelection:false,data:[[true,"true"],[false,"false"]],editable:true,customProperties:true}))});this.valueRendererDelegate=this.valueRenderer.createDelegate(this);this.propertyRendererDelegate=this.propertyRenderer.createDelegate(this)};Ext.extend(Ext.ux.guid.grid.PropertyColumnModel,Ext.grid.PropertyColumnModel,{getPropertyType:function(A){if(this.grid&&this.grid.getPropertyType){return this.grid.getPropertyType(A)}return null},getCellEditor:function(A,H){var D=this.store.getProperty(H);var G=D.data.name,E=D.data.value,B=D.data.type;if(this.grid.customEditors[G]){return this.grid.customEditors[G]}var F=this.getPropertyType(G);if(F){if(F.editor){if(typeof (F.editor)!="string"){return F.editor}B=F.editor}B=B||F.type;if(!B&&F.values){var C=F.editable?this.editors.editlist:this.editors.list;C.field.setList(F.values);return C}}if(B&&this.editors[B]){return this.editors[B]}else{if(Ext.isDate(E)){return this.editors.date}else{if(typeof E=="number"){return this.editors.number}else{if(typeof E=="boolean"){return this.editors["boolean"]}}}}return this.defaultEditor||this.editors[F?"string":"mixed"]},valueRenderer:function(B,C,A){if(typeof B=="boolean"){C.css=(B?"typeBoolTrue":"typeBoolFalse");return(B?"True":"False")}var D=this.getPropertyType(A.id);if(D&&["object","array","object/array"].indexOf(D.type)!=-1){C.css="typeObject"}if(typeof (B)=="string"&&B.length>24){B=B.substring(0,21)+"..."}var E=document.createElement("div");E.appendChild(document.createTextNode(B));return E.innerHTML},propertyRenderer:function(A,B){var C=this.getPropertyType(A);if(C){qtip=C.desc||"";B.attr='qtip="'+qtip.replace(/"/g,"&quot;")+'"'}return A},getRenderer:function(A){return A==0?this.propertyRendererDelegate:this.valueRendererDelegate}});Ext.ux.guid.grid.PropertyGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:false,stripeRows:false,trackMouseOver:false,clicksToEdit:1,enableHdMenu:false,viewConfig:{forceFit:true},jsonId:"__JSON__",codePress:true,codePressPath:undefined,getPropertyType:function(A){if(this.propertyTypes){var B=this.propertyTypes.find("name",A);if(B!=-1){return this.propertyTypes.getAt(B).data}}return null},initComponent:function(){this.customEditors=this.customEditors||{};this.lastEditRow=null;var B=new Ext.ux.guid.grid.PropertyStore(this);B.jsonId=this.jsonId,this.propStore=B;var A=new Ext.ux.guid.grid.PropertyColumnModel(this,B);B.store.sort("name","ASC");this.addEvents("beforepropertychange","propertychange","propertyvalue");this.cm=A;this.ds=B.store;Ext.ux.guid.grid.PropertyGrid.superclass.initComponent.call(this);this.selModel.on("beforecellselect",function(E,D,C){if(C===0){this.startEditing.defer(200,this,[D,1]);return false}},this)},onRender:function(){Ext.ux.guid.grid.PropertyGrid.superclass.onRender.apply(this,arguments);this.getGridEl().addClass("x-props-grid")},afterRender:function(){Ext.ux.guid.grid.PropertyGrid.superclass.afterRender.apply(this,arguments);if(this.source){this.setSource(this.source)}},setSource:function(A){this.propStore.setSource(A)},getSource:function(){return this.propStore.getSource()}});Ext.reg("guidpropertygrid",Ext.ux.guid.grid.PropertyGrid);Ext.namespace("Ext.ux.guid.data");Ext.ux.guid.data.Repository=function(A){Ext.apply(this,A);Ext.ux.guid.data.Repository.superclass.constructor.call(this);this.init()};Ext.extend(Ext.ux.guid.data.Repository,Ext.util.Observable,{items:{},last:null,rootBase:null,urlSupport:false,init:function(){this.refresh()},getUrl:function(A){if(!A){A=this.last}return(A&&this.urlSupport)?(this.rootBase?this.rootBase+"/"+A:A):null},refresh:function(A){this.items=this.items||{};if(typeof A=="function"){A(true)}},saveChanges:function(D,B,C,A){this.items[D]=D;if(B=="remove"){delete this.items[D];if(D==this.last){this.last=null}}else{this.last=D}if(typeof C=="function"){C(true)}},open:function(C,B,A){this.last=C;if(typeof B=="function"){B(true,A)}},remove:function(B,A){this.saveChanges(B,"remove",A)},rename:function(D,C,B){var A=this.last;this.open(D,function(F,E){if(F){this.saveChanges(C,"save",function(G){if(G){this.remove(D,function(H){if(H&&A==D){this.last=C}if(typeof B=="function"){B(H,E)}}.createDelegate(this))}else{if(typeof B=="function"){B(G,E)}}}.createDelegate(this),E)}else{if(typeof B=="function"){B(F,E)}}}.createDelegate(this))},save:function(C,A,B){this.saveChanges(C,(this.items[C]?"save":"new"),B,A)}});Ext.namespace("Ext.ux.guid.tree");Ext.ux.guid.tree.RepositoryLoader=function(B,A){Ext.apply(this,A);this.repository=B;Ext.ux.guid.tree.RepositoryLoader.superclass.constructor.call(this)};Ext.extend(Ext.ux.guid.tree.RepositoryLoader,Ext.tree.TreeLoader,{load:function(B,C,A){if(A!==false&&this.repository){this.repository.refresh(function(){this.loadNodes(B,false,C)}.createDelegate(this))}else{this.loadNodes(B,false,C)}},loadNodes:function(D,B,L){this.activeNode=null;if(!B){while(D.firstChild){D.removeChild(D.firstChild)}}D.beginUpdate();for(var H in this.repository.items){var E=this.repository.items[H];var M=H.split("/");var A="";var J=D;var C;for(var G=0;G<M.length;G++){A+=M[G];C=null;for(var F=0,K=J.childNodes;F<K.length&&!C;F++){if(K[F].attributes.text==M[G]){C=K[F]}}if(!C){var I=(G==M.length-1);C=new Ext.tree.TreeNode({text:(A==this.repository.last?"<B>"+M[G]+"</B>":M[G]),cls:I?"file":"folder",leaf:I,id:A});J.appendChild(C);if(A==this.repository.last){this.activeNode=C}}J=C;A+="/"}}D.endUpdate();if(typeof L=="function"){L(this.activeNode)}return this.activeNode}});Ext.namespace("Ext.ux.guid.data");Ext.ux.guid.data.CookieRepository=Ext.extend(Ext.ux.guid.data.Repository,{init:function(){this.cookies=new Ext.state.CookieProvider();Ext.ux.guid.data.CookieRepository.superclass.init.call(this)},refresh:function(A){this.items=this.cookies.get("repository.files");Ext.ux.guid.data.CookieRepository.superclass.refresh.call(this,A)},saveChanges:function(D,B,C,A){if(A){this.cookies.set("repository/"+D,escape(A))}if(B=="remove"){this.cookies.clear("repository/"+D)}Ext.ux.guid.data.CookieRepository.superclass.saveChanges.call(this,D,B,C,A);this.cookies.set("repository.files",this.items)},open:function(C,B,A){A=unescape(this.cookies.get("repository/"+C))||A;Ext.ux.guid.data.CookieRepository.superclass.open.call(this,C,B,A)}});Ext.namespace("Ext.ux.guid.data");Ext.ux.guid.data.PHPFileRepository=Ext.extend(Ext.ux.guid.data.Repository,{url:"phpFiles.php",rootBase:"json",urlSupport:true,refresh:function(A){Ext.Ajax.request({url:this.url,params:{cmd:"get_files",baseDir:this.rootBase},callback:function(C,D,B){this.items=D?Ext.util.JSON.decode(B.responseText):{};if(typeof A=="function"){A(D)}},scope:this})},saveChanges:function(D,B,C,A){Ext.Ajax.request({url:this.url,params:{cmd:"save_changes",baseDir:this.rootBase,filename:D,action:B,content:A},callback:function(F,G,E){if(G&&E.responseText=="1"){if(B=="remove"){delete this.items[D];if(D==this.last){this.last=null}}else{this.last=D}}if(typeof C=="function"){C(E.responseText=="1")}},scope:this})},open:function(C,B,A){Ext.Ajax.request({url:this.url,params:{cmd:"get_content",baseDir:this.rootBase,filename:C},callback:function(E,F,D){if(F){this.last=C}if(typeof B=="function"){B(F,D.responseText||A)}},scope:this})}});Ext.namespace("Ext.ux.guid.plugin");Ext.ux.guid.plugin.Designer=function(A){Ext.ux.guid.plugin.Designer.superclass.constructor.call(this,A);this.initialConfig=A};Ext.extend(Ext.ux.guid.plugin.Designer,Ext.ux.Json,{version:"2.1.0",jsonPath:"js/",wizardPath:"wizard/",thirdpartyPath:"3rdparty/",docPath:"doc/",cssPath:"css/",repositoryPath:"json/",autoShow:true,toolboxTarget:false,toolboxJson:"{0}Ext.ux.guid.plugin.Designer.json",customProperties:false,enableCopy:true,enableShow:true,enableEdit:true,enableVersion:true,enableOptions:true,optionsUrl:"{0}Designer.Options.json",autoResize:true,propertyDefinitionFiles:null,propertyDefinitions:["{0}Ext.ux.guid.plugin.Designer.Properties.json"],componentFiles:null,components:["{0}Ext.ux.guid.plugin.Designer.Components.json"],helpUrl:"{3}index.html",autoLoad:false,jsonId:"__JSON__",licenseText:"/* This file is created or modified with \n * Ext.ux.guid.plugin.GuiDesigner (v{5}) \n */",undoBtnId:Ext.id(),redoBtnId:Ext.id(),undoHistoryMax:20,undoHistory:[],undoHistoryMark:0,repository:null,codePress:!Ext.isSafari,codePressPath:"{2}codepress",formatPath:function(A){return String.format(A,this.jsonPath||"",this.wizardPath||this.jsonPath||"",this.thirdpartyPath||"",this.docPath||"",this.cssPath||"",this.version,this.repositoryPath)},initialize:function(){Ext.ux.guid.plugin.Designer.superclass.initialize.call(this);this.licenseText=this.formatPath(this.licenseText);this.toolboxJson=this.formatPath(this.toolboxJson);this.optionsUrl=this.formatPath(this.optionsUrl);this.helpUrl=this.formatPath(this.helpUrl);this.codePressPath=this.formatPath(this.codePressPath);for(var A=0;A<this.propertyDefinitions.length;A++){this.propertyDefinitions[A]=this.formatPath(this.propertyDefinitions[A])}for(var A=0;A<this.components.length;A++){this.components[A]=this.formatPath(this.components[A])}Ext.QuickTips.init();this.addEvents({beforeshow:true,beforehide:true,add:true,remove:true,change:true,newconfig:true,selectelement:true,loadfailed:false})},init:function(A){this.container=A;this.container.codeConfig={};this.container.on("render",function(){this.drag=new Ext.dd.DragZone(this.container.el,{ddGroup:"designerddgroup",getDragData:this.getDragData.createDelegate(this)});this.drop=new Ext.dd.DropZone(this.container.el,{ddGroup:"designerddgroup",notifyOver:this.notifyOver.createDelegate(this),notifyDrop:this.notifyDrop.createDelegate(this)});this.container.el.on("click",function(D,B){var C=this.focusElement(this.getTarget(D));D.stopEvent()},this);this.resizeLayer=new Ext.Layer({cls:"resizeLayer",html:"Resize me"});this.resizeLayer.setOpacity(0.7);this.resizeLayer.resizer=new Ext.Resizable(this.resizeLayer,{handles:"se,s,e",draggable:true,dynamic:true,pinned:true});this.resizeLayer.resizer.dd.lock();this.resizeLayer.resizer.on("resize",this.resizeElement,this);this.resizeLayer.resizer.dd.endDrag=this.moveElement.createDelegate(this);this.toolbox(this.autoShow);this.createConfig();this.initContextMenu();if(this.autoLoad){if(typeof this.autoLoad!=="object"){this.autoLoad={url:this.autoLoad}}if(this.autoLoad.nocache==undefined){this.autoLoad.nocache=this.nocache}this.loadConfig(this.autoLoad.url)}},this)},initContextMenu:function(){var A=new Ext.menu.Menu({items:[{text:"Delete this element",iconCls:"icon-deleteEl",scope:this,handler:function(B){this.removeElement(A.element)}},{text:"Visual resize / move",tooltip:"Visual resize the element.<br/>You can move it too if in an <b>absolute</b> layout",iconCls:"icon-resize",scope:this,handler:function(B){this.visualResize(A.element)}}]});this.container.el.on("contextmenu",function(C){C.preventDefault();var B=this.getDesignElement(this.getTarget(C));if(B){A.element=B;A.showAt(C.getXY())}},this)},hideVisualResize:function(){this.resizeLayer.hide();this.resizeLayer.resizer.dd.lock()},visualResize:function(C,A){var E=A===false?C:this.selectElement(C);if(!E){return }var B=this.getContainer(E.ownerCt);var D=B.codeConfig?B.codeConfig.layout:null;if(D=="fit"){this.fireEvent("error","visualResize","Cannot resize element within fit layout")}else{if(D=="absolute"){this.resizeLayer.resizer.dd.unlock();this.resizeLayer.resizer.dd.constrainTo(B.body)}else{this.resizeLayer.resizer.dd.lock()}this.resizeLayer.setBox(E.el.getBox());this.resizeLayer.show()}},moveElement:function(){var B=this.activeElement;var C=this.resizeLayer.getXY();var A=this.getContainer(B.ownerCt).body.getXY();this.markUndo();B.codeConfig.x=C[0]-A[0];B.codeConfig.y=C[1]-A[1];this.redrawElement()},resizeElement:function(E,A,C){var D=this.activeElement;var B=D.el.getSize();this.markUndo();if(B.width!=A){D.codeConfig.width=A;delete D.codeConfig.columnWidth}if(B.height!=C){D.codeConfig.height=C;delete D.codeConfig.autoHeight}this.redrawElement()},removeElement:function(D,A){if(!D){return false}var B=this.getContainer(D.ownerCt);if(!A){this.markUndo()}for(var C=0;C<B.items.length;C++){if(B.items.items[C]==D){B.codeConfig.items.splice(C,1);B.remove(D,true);if(B.codeConfig.items.length==0){delete B.codeConfig.items}if(!A||A=="noundo"){this.redrawElement(B,this.getJsonId(this.activeElement==D?B:this.activeElement));this.fireEvent("remove")}else{this.redrawContainer=true}return true}}return false},menuUpdate:function(){var A=Ext.getCmp(this.undoBtnId);if(A){if(this.undoHistoryMark>0){A.enable()}else{A.disable()}}A=Ext.getCmp(this.redoBtnId);if(A){if(this.undoHistory.length>this.undoHistoryMark+1){A.enable()}else{A.disable()}}},markUndo:function(){while(this.undoHistory.length>this.undoHistoryMark){this.undoHistory.pop()}this.undoHistory.push({config:this.encode(this.getConfig(),0,true),activeId:this.getJsonId()});while(this.undoHistory.length>this.undoHistoryMax){this.undoHistory.shift()}this.undoHistoryMark=this.undoHistory.length;this.menuUpdate()},undo:function(){if(this.undoHistoryMark>0){if(this.undoHistoryMark==this.undoHistory.length){this.undoHistory.push({config:this.encode(this.getConfig(),0,true),activeId:this.getJsonId()});this.undoHistoryMark=this.undoHistory.length-1}this.undoHistoryMark--;var A=this.undoHistory[this.undoHistoryMark];this.setConfig(A.config,true);this.selectElement(A.activeId);this.menuUpdate()}},redo:function(){if(this.undoHistory.length>this.undoHistoryMark+1){this.undoHistoryMark++;var A=this.undoHistory[this.undoHistoryMark];this.setConfig(A.config,true);this.selectElement(A.activeId);this.menuUpdate()}},appendConfig:function(B,C,I,D,A,E){if(!B){return false}this.markUndo();var K=function(P,M,L,O){if(!P.items){P.initItems()}var Q=P.items.length;for(var N=0;N<P.items.length;N++){if(P.items.items[N]==L){Q=(O)?N:N+1;N=P.items.length}}if(!P.codeConfig.items||!(P.codeConfig.items instanceof Array)){P.codeConfig.items=[]}delete P.codeConfig.html;if(Q>=P.codeConfig.items.length){P.codeConfig.items.push(M)}else{P.codeConfig.items.splice(Q,0,M)}}.createDelegate(this);if(typeof C=="function"){C.call(this,function(L){this.appendConfig(B,L,true,D,A,E)}.createDelegate(this),this)}else{var J,H=this.getDesignElement(B,true);var F=this.editable(Ext.applyIf(this.clone(C),E||{}));var G=function(M,L){if(!M){return }if(F.xtype=="form"&&M instanceof Ext.form.FormPanel){delete F.xtype;F.layout="form"}G(this.getContainer(M.ownerCt),M)}.createDelegate(this);G(H);J=this.getContainer(H);switch(D){case"abovecode":case"belowcode":J=this.isContainer(H)?this.getContainer(H.ownerCt):J;case"appendcode":this.removeElement(A,true);K(J,F,H,D=="abovecode");break;case"appendafter":K(J,F,H,false);break;case"appendbefore":K(J,F,H,true);break;case"moveafter":this.removeElement(A,true);K(J,F,H,false);break;case"movebefore":this.removeElement(A,true);K(J,F,H,true);break;case"move":this.removeElement(A,true);K(J,F);break;default:K(J,F)}this.modified=true;this.fireEvent("add");this.redrawElement(J,F[this.jsonId])}return false},createConfig:function(){if(this.container.items&&this.container.items.first()){var A=[];while(this.container.items.first()){A.push(this.container.items.first());this.container.items.remove(this.container.items.first())}var B={border:false,layout:this.container.getLayout(),items:this.editable(A)};B[this.jsonId]=Ext.id();var C=this.container.add(B);C.codeConfig=B}},isModified:function(A){if(A!=undefined){this.modified=A}return this.modified},loadConfig:function(A){if(this.loadMask&&this.container.ownerCt){this.container.ownerCt.el.mask(this.loadMsg,this.msgCls)}Ext.Ajax.request({url:A,method:"GET",callback:function(C,D,B){if(D){this.setConfig(B.responseText,false);this.modified=false}else{if(!this.fireEvent("loadfailed",A,B)){Ext.Msg.alert("Failure","Failed to load url :"+A)}}if(this.loadMask&&this.container.ownerCt){this.container.ownerCt.el.unmask()}},scope:this})},getCode:function(A){return this.encode(this.getConfig(A))},require:function(G,D){var C=Ext.ux.guid.plugin.Designer.superclass.require.call(this,G,D);if(C.js.length||C.css.length){var F=(D&&D.nocache!=undefined)?D.nocache:this.nocache;var B=(this.container.items&&this.container.items.items.length==1)?this.getConfig(this.container.items.items[0]):{};if(!B.json){B.json={}}var A=B.json.required_js?B.json.required_js.replace(",",";").split(";"):[];for(var E=0;E<A.length;E++){if(C.js.indexOf(A[E])==-1){C.js.push(this.formatPath(A[E]))}}if(C.js.length!=0){B=this.setJsonValue(B,"required_js",C.js.join(";"))}A=B.json.required_css?B.json.required_css.replace(",",";").split(";"):[];for(var E=0;E<A.length;E++){if(C.css.indexOf(A[E])==-1){C.css.push(this.formatPath(A[E]))}}if(C.css.length!=0){B=this.setJsonValue(B,"required_css",C.css.join(";"))}if(!(this.container.items&&this.container.items.items.length==1)){C.cfg=B}}return C},getConfig:function(D){if(!D&&this.container.items){D=this.container.items.items;if(D.length>1){var B=[];for(var C=0;C<D.length;C++){B.push(this.getConfig(D[C]))}return B}D=D[0]}if(!D){return{}}if(!D.codeConfig&&D[this.jsonId]){var A=function(G){if(!G){return null}if(G[this.jsonId]==D[this.jsonId]){return G}if(G.items){for(var E=0;E<G.items.length;E++){var F=A(G.items[E]);if(F){return F}}}return null}.createDelegate(this);D.codeConfig=A(this.codeConfig)}return D.codeConfig||D.initialConfig},setConfig:function(B,C){if(!C){this.markUndo()}var A=(typeof (B)=="object"?B:this.decode(B))||null;this.container.codeConfig=A?{items:(A instanceof Array?this.editable(A):[this.editable(A)])}:{};this.redrawElement(this.container);this.modified=true;this.fireEvent("newconfig",C);return true},refresh:function(){this.redrawElement(this.container)},getContainer:function(A){var B=A;while(B&&B!=this.container&&!this.isContainer(B)){B=B.ownerCt}if(B&&!B.codeConfig){B.codeConfig=this.getConfig(B)}return B},getJsonId:function(A){A=A||this.activeElement;if(!A){return null}return A[this.jsonId]?A[this.jsonId]:null},redrawElement:function(B,A){this.hideVisualResize();var C=B||this.activeElement;if(C){try{var G=A||this.getJsonId();var E=this.container;if(!this.redrawContainer&&C!=E){var F="";E=this.getContainer(C);while(E!=this.container&&!F){F=E.codeConfig.layout;E=this.getContainer(E.ownerCt)}}this.apply(E,this.getConfig(E).items);this.redrawContainer=false;this.selectElement(G)}catch(D){if(this.fireEvent("error","redrawElement",D)){Ext.Msg.alert("Failure","Failed to redraw element "+D)}return false}this.fireEvent("change",C);this.modified=true;return true}return false},focusElement:function(A){var B=this.selectElement(A);if(B&&B.innerWrap){B.innerWrap.focus()}else{if(B){B.focus()}}},selectElement:function(B){if(typeof (B)=="string"){B=this.findByJsonId(B)}var C=this.highlightElement(this.getDesignElement(B));if(this.autoResize&&!this.isContainer(C)){this.visualResize(C,false)}else{this.hideVisualResize()}if(C&&C==this.activeElement){return C}this.activeElement=C;if(C){var A=function(G,F){if(!G){return }var D;if(D=G instanceof Ext.TabPanel?G:null){if(F&&F!=D.getActiveTab()){D.setActiveTab(F)}for(var E=0;E<D.items.items.length;E++){if(D.items.items[E]==D.getActiveTab()&&D.codeConfig.activeTab!=E){D.codeConfig.activeTab=E;D.doLayout()}}}A(this.getContainer(G.ownerCt),G)}.createDelegate(this);A(C,null);if(this.propertyGrid){this.propertyFilter();this.propertyGrid.enable();this.propertyGrid.setSource(C.codeConfig)}}else{if(this.propertyGrid){this.propertyGrid.disable();this.propertyGrid.setSource({})}}this.fireEvent("selectelement",C);return C},highlightElement:function(A){this.container.el.removeClass("selectedElement");this.container.el.select(".selectedElement").removeClass("selectedElement");this.container.el.select(".designerddgroup").removeClass("designerddgroup");if(A){if(A.innerWrap){A.innerWrap.addClass("selectedElement");if(A.id!=this.container.id){A.innerWrap.addClass("designerddgroup")}}else{A.addClass("selectedElement");if(A.id!=this.container.id){A.addClass("designerddgroup")}}return A}return A},isElementOf:function(C,B){B=B||this.container;var A=50,E=C,D=B.getId();while(A&&E){if(E.id==D){return C}E=E.ownerCt;A--}return false},getDesignElement:function(D,A){var E,B=10;while(B&&D){E=Ext.getCmp(D.id);if(E){var G=this.container.getId(),F=E;B=50;while(B&&F&&F.id!=G){if(F instanceof Ext.Panel&&F.autoLoad){E=F}F=F.ownerCt;B--}var C=F&&F.id==G;if(!E.codeConfig){E.codeConfig=this.getConfig(E)}if(!A&&E==this.container){return false}return C?E:(A?this.container:false)}D=D.parentNode;B--}return A?this.container:false},findByJsonId:function(A){return this.container.findBy(function(C,B){return(C[this.jsonId]==A?true:false)},this)[0]},getDragData:function(C){var B=this.highlightElement(this.getDesignElement(this.getTarget(C)));var A=C.getTarget(".designerddgroup");if(B&&A){var D=A.cloneNode(true);D.id=Ext.id();return{ddel:D,config:B.initialConfig,internal:true,source:B}}},isContainer:function(A){return A instanceof Ext.Container},getTarget:function(B){if(!B){return }var C=B.getTarget();if((!Ext.isGecko||Ext.isGecko3)&&B.lastTarget&&B.lastTarget==C){return C}var D,A=function(J){if(J&&J.el&&J.getPosition&&J.getSize){var I,G;if(J.innerWrap){I=J.innerWrap.getXY();G=J.innerWrap.getSize()}else{I=J.getPosition();G=J.getSize()}if(B.xy[0]>=I[0]&&B.xy[0]<=I[0]+G.width&&B.xy[1]>=I[1]&&B.xy[1]<=I[1]+G.height){D=J;if(J.items&&J.items.items){var H=J.items.items;for(var F=0,E=H.length;F<E&&!A(H[F]);F++){}}return true}}return false};A(this.container);B.lastTarget=D||C;return B.lastTarget},notifyOver:function(E,D,C){if(C.config){var B=this.highlightElement(this.getDesignElement(this.getTarget(D),true));var A=B.getEl();if(C.internal&&!D.shiftKey){if(this.isElementOf(B,C.source,true)){return false}C.drop=this.isContainer(B)?"move":(A.getX()+(A.getWidth()/2)>Ext.lib.Event.getPageX(D)?"movebefore":"moveafter");return(C.drop=="movebefore"?"icon-element-move-before":(C.drop=="moveafter"?"icon-element-move-after":"icon-element-move"))}else{C.drop=this.isContainer(B)?"append":(A.getX()+(A.getWidth()/2)>Ext.lib.Event.getPageX(D)?"appendbefore":"appendafter");return(C.drop=="appendbefore"?"icon-element-add-before":(C.drop=="appendafter"?"icon-element-add-after":"icon-element-add"))}}C.drop=null;return false},notifyDrop:function(D,C,B){var A=this.getTarget(C);if(B.config&&!B.processed&&B.drop){this.appendConfig(A,B.config,true,B.drop,B.source,this.require(B.require).cfg);B.processed=true}return true},setObjectValue:function(A,B,E,D,C){if(B=="xtype"&&this.jsonId){if(!Ext.ComponentMgr.isTypeAvailable(E)){D={value:E,encode:true};E="panel";this.fireEvent("error","setObjectValue",new SyntaxError("xtype "+D.value+" does not exists"))}else{D=null}}return Ext.ux.guid.plugin.Designer.superclass.setObjectValue.call(this,A,B,E,D,C)},setPropertyGrid:function(A){this.propertyGrid=A;this.propertyGrid.jsonScope=this.getScope();A.on("beforepropertychange",function(C,E,B,D){this.markUndo()},this);A.on("propertyvalue",function(F,B,E,C,D){this.setObjectValue(F,B,E,E);return false},this);A.on("propertychange",function(C,E,B,D){this.redrawElement.defer(150,this)},this)},toolbox:function(visible){if(!this._toolbox){for(var i=0;this.propertyDefinitionFiles&&i<this.propertyDefinitionFiles.length;i++){this.propertyDefinitionFiles[i]=this.formatPath(this.propertyDefinitionFiles[i]);if(this.propertyDefinitions.indexOf(this.propertyDefinitionFiles[i])==-1){this.propertyDefinitions.push(this.propertyDefinitionFiles[i])}}for(var i=0;this.componentFiles&&i<this.componentFiles.length;i++){this.componentFiles[i]=this.formatPath(this.componentFiles[i]);if(this.components.indexOf(this.componentFiles[i])==-1){this.components.push(this.componentFiles[i])}}var proxy=new Ext.ux.data.HttpMergeProxy(this.propertyDefinitions);this.properties=new Ext.data.JsonStore({proxy:proxy,sortInfo:{field:"name",order:"ASC"},root:"properties",fields:["name","type","defaults","desc","instance","editable","values","editor"]});if(Ext.isVersion("2.0","2.1.9")){this.properties.proxy=proxy}this.properties.load();var filterByFn=function(rec,id){var i=rec.get("instance");if(i){return eval("this.activeElement instanceof "+i)}return true}.createDelegate(this);this.propertyFilter=function(){this.properties.filterBy(filterByFn,this)};this.toolboxTarget=Ext.getCmp(this.toolboxTarget);if(this.toolboxTarget){this._toolbox=this.toolboxTarget;this._toolbox.add(new Ext.ux.JsonPanel({autoLoad:this.toolboxJson,nocache:this.nocache,scope:this,setTitle:function(title,optional){this.scope.toolboxTarget.setTitle(title,optional)}}))}else{this._toolbox=new Ext.ux.JsonWindow({x:-1000,y:-1000,autoLoad:this.toolboxJson,nocache:this.nocache,scope:this,closable:false})}}if(visible||visible===true){if(this.fireEvent("beforeshow",this._toolbox)){this._toolbox.show();this._toolbox.doLayout()}}else{if(this.fireEvent("beforehide",this._toolbox)){this._toolbox.hide()}}}});Ext.override(Ext.form.Label,{onRender:function(B,A){if(!this.el){this.el=document.createElement("label");this.el.innerHTML=this.text?Ext.util.Format.htmlEncode(this.text):(this.html||"");if(this.forId){this.el.setAttribute("htmlFor",this.forId)}this.el.id=this.id}Ext.form.Label.superclass.onRender.call(this,B,A)},setText:function(A,B){this.text=B!==false?A:"";this.html=B!==false?"":A;if(this.rendered){this.el.dom.innerHTML=B!==false?Ext.util.Format.htmlEncode(A):A}return this}});Ext.override(Ext.form.Checkbox,{onClick:function(A){if(!this.codeConfig){if(!this.disabled&&!this.readOnly){this.toggleValue()}A.stopEvent()}}});